{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://labki.org/schemas/property.schema.json",
  "title": "Property",
  "description": "Defines an attribute that can be assigned to Categories in the Labki ontology",
  "type": "object",
  "required": ["id", "label", "description", "datatype", "cardinality"],
  "not": {
    "required": ["allowed_values", "Allows_value_from_category"]
  },
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier matching the filename (without .json). Convention: Has_* or Is_* prefix",
      "pattern": "^(Has|Is)_[a-z]+(_[a-z]+)*$"
    },
    "label": {
      "type": "string",
      "description": "Human-readable display name",
      "minLength": 1
    },
    "description": {
      "type": "string",
      "description": "Explanation of what this Property represents",
      "minLength": 1
    },
    "datatype": {
      "type": "string",
      "description": "The Semantic MediaWiki data type. Reference: https://www.semantic-mediawiki.org/wiki/Help:List_of_datatypes",
      "enum": [
        "Annotation URI",
        "Boolean",
        "Code",
        "Date",
        "Email",
        "External identifier",
        "Geographic coordinates",
        "Keyword",
        "Monolingual text",
        "Number",
        "Page",
        "Quantity",
        "Record",
        "Reference",
        "Telephone number",
        "Temperature",
        "Text",
        "URL"
      ]
    },
    "cardinality": {
      "type": "string",
      "description": "Whether the property accepts single or multiple values",
      "enum": ["single", "multiple"]
    },
    "allowed_values": {
      "oneOf": [
        {
          "type": "array",
          "description": "Enumeration of permitted values",
          "items": {
            "type": "string"
          },
          "minItems": 1,
          "uniqueItems": true
        },
        {
          "type": "object",
          "description": "Dynamic allowed values from a category",
          "required": ["from_category"],
          "additionalProperties": false,
          "properties": {
            "from_category": {
              "type": "string",
              "description": "Category ID to source allowed values from",
              "pattern": "^[A-Z][a-z]*(_[a-z]+)*$"
            }
          }
        }
      ]
    },
    "allowed_pattern": {
      "type": "string",
      "description": "Regex pattern for validating values",
      "minLength": 1
    },
    "allowed_value_list": {
      "type": "string",
      "description": "Reference to a wiki page containing allowed values",
      "minLength": 1
    },
    "display_units": {
      "type": "array",
      "description": "Units or formats for display",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "uniqueItems": true
    },
    "display_precision": {
      "type": "integer",
      "description": "Number of decimal places for numeric display",
      "minimum": 0
    },
    "unique_values": {
      "type": "boolean",
      "description": "If true, each value can only be assigned once across all pages"
    },
    "has_display_template": {
      "type": "string",
      "description": "Reference to a Template for custom rendering",
      "minLength": 1
    },
    "Allows_value_from_category": {
      "type": "string",
      "description": "Category ID to source allowed values from. Mutually exclusive with allowed_values.",
      "pattern": "^[A-Z][a-z]*(_[a-z]+)*$"
    }
  }
}
